---
import Layout from '../layouts/Layout.astro';
import { getAgenti } from '../lib/googleSheets';

const agenti = await getAgenti();
---

<Layout>
  <main class="min-h-screen bg-slate-950 text-slate-100 flex flex-col items-center p-8 gap-12">
    <!-- Header with Logo -->
    <header class="w-full max-w-2xl flex flex-col items-center gap-6 animate-fade-in">
      <div class="w-full max-w-[300px]">
        <img 
          src="/logo.png" 
          alt="Frimm Academy Logo" 
          class="w-full h-auto drop-shadow-[0_0_15px_rgba(6,182,212,0.3)]"
        />
      </div>
      <h1 class="text-4xl font-extrabold tracking-tight text-white text-center">
        I Nostri <span class="text-cyan-400">Agenti</span>
      </h1>
      <div class="h-1 w-24 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-full"></div>
    </header>

    <!-- Agents List -->
    <section class="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in-up">
      {agenti.map((agente) => (
        <a 
          href={`/agente/${agente.slug}`} 
          class="group bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-2xl p-6 flex flex-col items-center gap-4 transition-all hover:bg-slate-800/80 hover:border-cyan-500/50 hover:shadow-[0_0_20px_rgba(6,182,212,0.1)] hover:-translate-y-1"
        >
          <div class="w-24 h-24 rounded-full overflow-hidden border-2 border-slate-700 group-hover:border-cyan-500 transition-colors">
            <img 
              src={agente.foto_url || '/placeholder-agent.jpg'} 
              alt={`${agente.nome} ${agente.cognome}`} 
              class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500"
            />
          </div>
          <div class="text-center">
            <h2 class="text-xl font-bold text-white group-hover:text-cyan-400 transition-colors">
              {agente.nome} {agente.cognome}
            </h2>
            <p class="text-xs text-slate-400 uppercase tracking-widest mt-1">
              {agente.ruolo}
            </p>
          </div>
          <div class="mt-2 text-cyan-500 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2 text-sm font-medium">
            Vedi Biglietto da Visita
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
          </div>
        </a>
      ))}
    </section>

    <!-- Footer Decoration -->
    <footer class="mt-auto pt-12 text-slate-600 text-sm">
      Â© {new Date().getFullYear()} Frimm Academy. Tutti i diritti riservati.
    </footer>
  </main>
</Layout>

<style>
  :global(body) {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  .animate-fade-in {
    animation: fadeIn 1s ease-out forwards;
  }

  .animate-fade-in-up {
    animation: fadeInUp 1s ease-out 0.2s forwards;
    opacity: 0;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
